function jwSetViewable(t){window.nativeViewabilityModule.setViewable(t)}window.nativeViewabilityModule=function(){function t(t){var i;try{i=t.getBoundingClientRect()}catch(t){}return i?(i.width&&i.height||(i={top:i.top,right:i.right,bottom:i.bottom,left:i.left,width:i.right-i.left,height:i.bottom-i.top}),i):e()}function e(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function i(t,e){for(var i=e;i;){if(i==t)return!0;i=o(i)}return!1}function o(t){var e=t.parentNode;return e&&11==e.nodeType&&e.host?e.host:e}function n(t,e){return this._targetList=[],this._callback=t,this._rootMarginValues=this._parseRootMargin(e.rootMargin),a=this,this}var r=!1,a=null;jwSetViewable=function(t){r=t,null!=a&&a.onNativeViewabilityChanged()},n.prototype.disconnect=function(){this._targetList=[]},n.prototype.observe=function(t){var e=this._targetList.indexOf(t);e>-1&&this._targetList.splice(e,1),this._targetList.push(t)},n.prototype.takeRecords=function(){var i={};i.isIntersecting=!r,i.intersectionRatio=r?1:0,i.time=performance.now(),i.rootBounds=this._rootIsInDom()?this._getRootRect():e();var o=[];return this._targetList.forEach(function(e){var n=Object.assign({},i);n.target=e,n.boundingClientRect=t(e),o.push(n)}),o},n.prototype.unobserve=function(t){var e=this._targetList.indexOf(t);e>-1&&this._targetList.splice(e,1)},n.prototype.onNativeViewabilityChanged=function(){this._callback(this.takeRecords(),this)},n.prototype._rootIsInDom=function(){return!this.root||i(document,this.root)},n.prototype._getRootRect=function(){var e;if(this.root)e=t(this.root);else{var i=document.documentElement,o=document.body;e={top:0,left:0,right:i.clientWidth||o.clientWidth,width:i.clientWidth||o.clientWidth,bottom:i.clientHeight||o.clientHeight,height:i.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},n.prototype._expandRectByRootMargin=function(t){var e=this._rootMarginValues.map(function(e,i){return"px"==e.unit?e.value:e.value*(i%2?t.width:t.height)/100}),i={top:t.top-e[0],right:t.right+e[1],bottom:t.bottom+e[2],left:t.left-e[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},n.prototype._parseRootMargin=function(t){var e=t||"0px",i=e.split(/\s+/).map(function(t){var e=/^(-?\d*\.?\d+)(px|%)$/.exec(t);if(!e)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(e[1]),unit:e[2]}});return i[1]=i[1]||i[0],i[2]=i[2]||i[0],i[3]=i[3]||i[1],i},window.IntersectionObserver=n}();
